#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
"""
import os
import sys
import time
import subprocess
from datetime import datetime
import pytz

def run_test():
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã"""
    
    print("üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏")
    print("=" * 60)
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –ø–æ –ú–æ—Å–∫–≤–µ
    moscow_tz = pytz.timezone('Europe/Moscow')
    now = datetime.now(moscow_tz)
    
    print(f"üïê –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è (–ú–æ—Å–∫–≤–∞): {now.strftime('%Y-%m-%d %H:%M:%S')}")
    print(f"‚è∞ –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏: –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã")
    print(f"üîç –ü–æ–∏—Å–∫ –ø–æ—Å—Ç–æ–≤: –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç")
    
    print("\nüìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:")
    print("1. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ—Å—Ç—ã")
    print("2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü–µ")
    print("3. –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø–æ—Å—Ç—ã")
    print("4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É")
    print("5. –í—ã—Ö–æ–¥")
    
    while True:
        try:
            choice = input("\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ (1-5): ").strip()
            
            if choice == "1":
                print("\nüì§ –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ—Å—Ç—ã...")
                result = subprocess.run([sys.executable, "add_test_posts.py"], 
                                      capture_output=True, text=True, encoding='utf-8')
                print(result.stdout)
                if result.stderr:
                    print("–û—à–∏–±–∫–∏:", result.stderr)
                    
            elif choice == "2":
                print("\nüëÄ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º –ø–æ—Å—Ç—ã...")
                result = subprocess.run([sys.executable, "view_posts.py"], 
                                      capture_output=True, text=True, encoding='utf-8')
                print(result.stdout)
                if result.stderr:
                    print("–û—à–∏–±–∫–∏:", result.stderr)
                    
            elif choice == "3":
                print("\nüóëÔ∏è –û—á–∏—â–∞–µ–º –ø–æ—Å—Ç—ã...")
                result = subprocess.run([sys.executable, "clear_test_posts.py"], 
                                      capture_output=True, text=True, encoding='utf-8')
                print(result.stdout)
                if result.stderr:
                    print("–û—à–∏–±–∫–∏:", result.stderr)
                    
            elif choice == "4":
                print("\nüöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É...")
                print("‚ö†Ô∏è –°–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∞–±–ª–∏—Ü—É –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã")
                print("‚ö†Ô∏è –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
                try:
                    subprocess.run([sys.executable, "main.py"])
                except KeyboardInterrupt:
                    print("\n‚èπÔ∏è –°–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞")
                    
            elif choice == "5":
                print("\nüëã –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã")
                break
                
            else:
                print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
                
        except KeyboardInterrupt:
            print("\nüëã –í—ã—Ö–æ–¥ –∏–∑ –ø—Ä–æ–≥—Ä–∞–º–º—ã")
            break
        except Exception as e:
            print(f"‚ùå –û—à–∏–±–∫–∞: {e}")

if __name__ == "__main__":
    run_test()
